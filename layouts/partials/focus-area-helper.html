{{/* 
  Focus Area Helper Functions
  
  Usage:
  {{ partial "focus-area-helper.html" (dict "context" . "tag" "web-security") }}
  
  Returns:
  - found: true/false
  - key: The focus_key of the matching focus area
  - name: The human-readable name (title)
  - color: The color for visualization
  - icon: The icon name
*/}}

{{- $context := .context -}}
{{- $tag := .tag | lower -}}
{{- $focusAreaPages := where $context.Site.Pages "Section" "focus" -}}
{{- $focusAreaPages = where $focusAreaPages ".Params.focus_key" "!=" nil -}}

{{- $result := dict "found" false -}}

{{- range $focusAreaPages -}}
  {{- if in .Params.related_tags $tag -}}
    {{- $result = merge $result (dict "found" true "key" .Params.focus_key "name" .Title "color" .Params.color "icon" .Params.icon) -}}
    {{- break -}}
  {{- end -}}
{{- end -}}

{{- return $result -}} 